<%-include('../user/layouts/user-header.ejs') %>

 <!-- Shop Section Begin -->
 <section class="shop spad">
    <div class="container">
        <div class="row">
            <div class="col-lg-3 col-md-3">
                <div class="shop__sidebar">
                    <!-- <div class="sort-filter">
                        <form id="sortform">
                        <label for="sort">Sort by:</label>
                        <select id="sort">
                          <option value="price-low">Price: Low to High</option>
                          <option value="price-high">Price: High to Low</option>
                        </select>
                        <button type="submit" onclick=""></button>
                        </form>
                        <label for="filter">Filter by:</label>
                        <h6>Shop by Category</h6>
                        <select id="filter">
                          <option value="category-1">Category 1</option>
                          <option value="category-2">Category 2</option>
                          <option value="category-3">Category 3</option>
                          <option value="brand-a">Brand A</option>
                          <option value="brand-b">Brand B</option>
                          <option value="brand-c">Brand C</option>
                        </select>
                      </div> -->

                      
                       
                       
                      
                      
                      
                      <form id="sortfilterform">
                     <div class="sidebar__categories">
                        <div class="section-title mb-2">
                            <h4>Categories</h4>
                        </div>
                       
                        <select id="filter" class="w-50 border-box border-0" name="category" >
                            <option >All</option>
                            <% category.forEach(function(category){ %>
  
                            <option value="<%=category.categoryName%>"><%=category.categoryName%></option>
                            <%})%>
                         
                          </select>
                        <!-- <div class="categories__accordion">
                            <div class="accordion" id="accordionExample">
                               
                                        <div class="card-body">
                                            <ul>
                                                <% category.forEach(function(category){ %>
                                                <li><a href="#"><%=category.categoryName%></a></li>
                                                <%})%>
                                            </ul>
                                  
                                    </div>
                            </div>
                        </div> -->
                    <!-- </div> -->
                    <!-- <div class="sidebar__filter">
                        <div class="section-title">
                            <h4>Shop by price</h4>
                        </div>
                        <div class="filter-range-wrap">
                            <div class="price-range ui-slider ui-corner-all ui-slider-horizontal ui-widget ui-widget-content"
                            data-min="33" data-max="99"></div>
                            <div class="range-slider">
                                <div class="price-input">
                                    <p>Price:</p>
                                    <input type="text" id="minamount">
                                    <input type="text" id="maxamount">
                                </div>
                            </div>
                        </div>
                        <a href="#">Filter</a>
                    </div> -->
                    
                    <div class="sidebar__color">
                        <div class="section-title my-2">
                            <h4>Shop by Brand</h4>
                        </div>
                        <div class="size__list color__list">

                           
                            <select id="filter" class="w-50 border-box border-0" name="brand" >
                          <option  >All</option>
                          <% brand.forEach(function(brand){ %>

                          <option value="<%=brand.brand%>"><%=brand.brand%></option>
                          <%})%>
                       
                        </select>
                            
                        </div>
                    <!-- </div>  -->

                    <div class="sidebar__color">
                        <div class="section-title my-2" >
                            <h4>Sort By Price</h4>
                        </div>
                        <div class="size__list color__list">

                           
                            <select id="filter" class="w-50 border-box border-0" name="sort">
                            <!-- <option  value="" >None</option> -->
                          <option  value="1">Low to High</option>

                          <option value="-1">High to Low</option>
                       
                        </select>
                            
                        </div>
                    </div> 
                    <!-- <div class="my-2"> -->
                        <button type="submit" class="btn-danger" >Filter & Sort</button>
                    

                </div>
            </div>
                      </form>
                </div>
            </div>
           
            <div class="col-lg-9 col-md-9" >
                <div class="row" id="productlist">

                    <% if(product != ''){ %>

                    <% product.forEach(function(product){ %>

                    <div class="col-md-3 col-sm-6 mix women">
                        <div class="product__item">
                            
                            <div class="product__item__pic set-bg" data-setbg="/admin/images/<%=product.image[0]%>" style="height:200px;width:200px">
                                <!-- <div class="label new">New</div> -->
                                <ul class="product__hover">
                                    <li><a href="/admin/images/<%=product.image[0]%>" class="image-popup"><span class="arrow_expand"></span></a></li>
                                    <li><a class="btn btn-sm btn-outline-dark" href="#!"><span class="icon_heart_alt" onclick="wishlist('<%= product._id %>')"></span></a></li>

                                    <!-- <li><a href="#"><span class="icon_bag_alt"></span></a></li> -->
                                </ul>
                            </div>
                        
                            <div class="product__item__text">
                                <h6 class="font-semibold"><%=product.Brand%></h6><span><%=product.categoryName%></span>
                                <h6><a href="/productDetails/<%= product._id %>"> <%= product.ProductName %></a></h6>
                                
                                
                                <div class="product__price">₹<%= product.Price %></div>
                            </div>
                        </div>
                    </div>
                    <%})%>
                    <%}else{%>
                        <h4 class="text-center text-dark mt-3">No products found</h4>
                        <% } %>
                    <!-- <div class="col-lg-12 text-center">
                        <div class="pagination__option">
                            <a href="#">1</a>
                            <a href="#">2</a>
                            <a href="#">3</a>
                            <a href="#"><i class="fa fa-angle-right"></i></a>
                        </div>-->
                    </div> 


<!-- PAGINATION-->
<nav aria-label="Page navigation example">
    <ul class="pagination justify-content-center ">
      <li class="page-item mx-1"><a class="page-link" href="/shoppage?page=1" aria-label="Previous"><span aria-hidden="true">«</span></a>
      </li>
      <li class="page-item mx-1"><a class="page-link" href="/shoppage?page=1">1</a></li>
      <li class="page-item mx-1"><a class="page-link" href="/shoppage?page=2">2</a>
      </li>
      <li class="page-item ms-1"><a class="page-link" href="/shoppage?page=2" aria-label="Next"><span aria-hidden="true">»</span></a>
      </li>
    </ul>
  </nav>


                </div>
            </div>
        </div>
    </div>
</section>
<!-- Shop Section End -->

<script>
$(document).ready(function() {
  $('#sortfilterform').submit(function(event) {
    event.preventDefault(); // Prevent default form submission
    var formData = $(this).serialize(); // Serialize form data into a query string
    console.log(formData)
    document.getElementById('productlist').innerHTML = ''
    $.ajax({
      type: 'POST',
      url: 'sortfilter',
      data: formData,
      success: function(response) {
        console.log(response); // Log response from server
        if(response.pro.length<=0){document.getElementById('productlist').innerHTML+=`<h4>No matching item available</h4>`}
        else{
        response.pro.forEach((product) => {
                        document.getElementById('productlist').innerHTML += `
                       
                    <div class="col-lg-4 col-md-6">
                        <div class="product__item">
                            
                            <div class="product__item__pic set-bg" data-setbg="/admin/images/${product.image[0]}" Style="background-image: url(/admin/images/${product.image[0]});" > 

                                <!-- <div class="label new">New</div> -->
                                <ul class="product__hover">
                                    <li><a href="/admin/images/${product.image[0]}" class="image-popup"><span class="arrow_expand"></span></a></li>
                                    <li><a href="#"><span class="icon_heart_alt"></span></a></li>
                                    <li><a href="#"><span class="icon_bag_alt"></span></a></li>
                                </ul>
                            </div>
                        
                            <div class="product__item__text">
                                <h6>${product.Brand}</h6><span>${product.categoryName}</span>
                                <h6><a href="/productDetails/${product._id }"> ${product.ProductName}</a></h6>
                                <!-- <div class="rating">
                                    <i class="fa fa-star"></i>
                                    <i class="fa fa-star"></i>
                                    <i class="fa fa-star"></i>
                                    <i class="fa fa-star"></i>
                                    <i class="fa fa-star"></i>
                                </div> -->
                                <div class="product__price">₹${product.Price }</div>
                            </div>
                        </div>
                    </div>
                   
                    
                    <!-- <div class="col-lg-12 text-center">
                        <div class="pagination__option">
                            <a href="#">1</a>
                            <a href="#">2</a>
                            <a href="#">3</a>
                            <a href="#"><i class="fa fa-angle-right"></i></a>
                        </div>
                    </div> -->
                </div>
                `
                    })
                }
                
            },
      
      
      error: function(error) {
        console.log(error); // Log error message
      }
    });
  });
});

</script>




<%-include('../user/layouts/user-footer.ejs') %>

