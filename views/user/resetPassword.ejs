<html>
    <head>
        <title>Password Reset</title>
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">

    </head>
    <body>
        <div class="text-center">
        <h1 class="text-dark mt-2">HOWELL</h1><br>
        <h2 class="text-dark">Password Reset</h2>
    </div>
        <section>
            <div class="container ">
           

              <div class="row">
                <div class="col-md">
                    <div class="card mx-auto my-5" style="width:20rem;">
                        <div class="card-body">
                          <form action="/resetPassword" method="post" id="resetpwdform">
                          <!-- Email input -->
                            <div class="form-outline mb-4">
                              <input type="tel" id="form2Example1" class="form-control" name="otp" required/>
                                <label class="form-label" for="form2Example1">OTP</label>
                            </div>

                            <div>
                                <input type="email" id="reqEmail" value="<%=reqEmail%>"  name="email" class="" hidden/>
                              </div>
    
  
                              <!-- Password input -->
                              <div class="form-outline mb-4">
                                <input type="password" id="newpassword" class="form-control" name="newpassword" required/>
                                <label class="form-label" for="form2Example2">Password</label>
                              </div>
                              <div class="form-outline mb-4">
                                <input type="password" id="confirmpassword" class="form-control" name="confirmpassword" required/>
                                <label class="form-label" for="form2Example2">Confirm Password</label>
                              </div>

                              <% if (typeof otperror !== 'undefined') { %>
                                <p id="err" class="error text-danger"><%= otperror %></p>
                             <% } %>

  
                         
                              <div class="mt-3 text-center">
                                  <button type="submit" class="btn btn-dark">Submit</button>
                              </div>
                            
                          
                        </form>
                      </div>
                   </div>
                </div>
              </div>
        </section>
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js" integrity="sha384-oBqDVmMz9ATKxIep9tiCxS/Z9fNfEXiDAYTujMAeBAsjFuCZSmKbSSUnQlmh/jp3" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.min.js" integrity="sha384-cuYeSxntonz0PPNlHhBs68uyIAVpIIOZZ5JqeqvYYIcEL727kskC66kF92t6Xl2V" crossorigin="anonymous"></script>

<script>
    var password = document.getElementById("newpassword")
    var confirmpassword = document.getElementById("confirmpassword");
    var email = document.getElementById("reqEmail");
    email.value = reqEmail



    function validatePassword() {
      console.log("Password: " + password.value);
      console.log("Confirm Password: " + confirmpassword.value);
      if (password.value != confirmpassword.value) {
        confirmpassword.setCustomValidity("Passwords Don't Match");
      } else {
        confirmpassword.setCustomValidity('');
      }
    }

    password.onchange = validatePassword;
    confirmpassword.onkeyup = validatePassword;

    var form = document.getElementById("resetpwdform");

    form.onsubmit = function () {
      console.log("Form submitted");
      return validatePassword();
    };

  </script> 
</body>
</html>